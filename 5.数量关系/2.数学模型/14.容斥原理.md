# 容斥原理

容斥原理是行测数量关系中的重要知识点，也是集合论的基础内容之一。掌握容斥原理可以帮助考生更好地解决复杂的计数问题。

## 基本概念

容斥原理（Inclusion-Exclusion Principle）用于计算多个集合并集的元素个数。它的核心思想是：**先把所有集合的元素个数相加，然后减去重复计算的部分**。

## 基本公式

### 两个集合的情况

对于两个集合 A 和 B，其并集的元素个数为：

$|A \cup B| = |A| + |B| - |A \cap B|$

其中：

- $|A \cup B|$ 表示 A 和 B 的并集的元素个数
- $|A|$ 和 $|B|$ 分别表示集合 A 和 B 的元素个数
- $|A \cap B|$ 表示 A 和 B 的交集的元素个数

### 三个集合的情况

对于三个集合 A、B 和 C，其并集的元素个数为：

$|A \cup B \cup C| = |A| + |B| + |C| - |A \cap B| - |A \cap C| - |B \cap C| + |A \cap B \cap C|$

## 应用举例

### 例题1：班级活动参与统计

某班级有100名学生，其中参加篮球队的有30人，参加足球队的有25人，参加乒乓球队的有28人。已知参加篮球和足球的有10人，参加篮球和乒乓球的有12人，参加足球和乒乓球的有8人，三个队都参加的有5人。问至少参加一项运动的学生有多少人？

解析：

1. 设至少参加一项运动的学生人数为 x
2. 应用三个集合的容斥原理公式：
   $x = 30 + 25 + 28 - 10 - 12 - 8 + 5 = 58$

因此，至少参加一项运动的学生有58人。

### 例题2：购买商品统计

某商场做调查，发现购买商品A的有120人，购买商品B的有150人，购买商品C的有180人。同时购买A和B的有40人，购买A和C的有50人，购买B和C的有60人，购买全部三种商品的有20人。问总共有多少人购买了这三种商品中的至少一种？

解析：

1. 设购买至少一种商品的人数为 y
2. 应用三个集合的容斥原理公式：
   $y = 120 + 150 + 180 - 40 - 50 - 60 + 20 = 320$

因此，总共有320人购买了这三种商品中的至少一种。


### 例题3：三集合问题

某乡镇举行运动会，共有长跑、跳远和短跑三个项目。参
加长跑的有49人，参加跳远的有36人，参加短跑的有28人，只参加其中两
个项目的有13人，参加全部项目的有9人。那么参加该次运动会的总人数
为： 

- A. 75              
- C. 88              
- B. 82 
- D. 95 

<BlurredAnswer>
解析：“只参加其中两个项目”，说明是三集合非标准容斥。运动会总
人数49＋36＋28－13－9×2=82（或计算尾数为2）。B。 
</BlurredAnswer>

### 例题4：文氏图法

试验室通过测评Ⅰ和Ⅱ来核定产品的等级：两项
测评都不合格的为次品，仅一项测评合格的为中品，两项测评都合格的为优
品。某批产品只有测评Ⅰ合格的产品数是优品数的2倍，测评Ⅰ合格和测评
Ⅱ合格的产品数之比为6∶5。若该批产品次品率为10%，则该批产品的优品
率为： 

- A. 10%              
- C. 20%              
- B. 15% 
- D. 25% 

<BlurredAnswer>
解析：“只有测评Ⅰ合格”说明适合画图法，二集合容斥类。 
赋值优品为2，则只有Ⅰ合格为4，Ⅰ合格总共为6。根据合格之比为
6∶5，可知Ⅱ合格为5，则只有Ⅱ合格为5-2=3，那么总的合格为6+5-2=9，
次品率为10%，可知合格率为90%。则不合格为1，总数10。优品率2/10=20%。C。
</BlurredAnswer>

### 例题5：多集合反向构造

某社团共有46人，其中35爱好戏剧，30人爱好体
育，38人爱好写作，40人爱好收藏，这个社团至少有多少人以上四项活动都
喜欢?

- A. 5           
- C. 7           
- B. 6   
- D. 8

<BlurredAnswer>
思路1：多集合反向构造。 
①反向：不爱戏剧的有46－35=11（人），不爱体育有46－30=16
（人），不爱写作有46－38=8（人），不爱收藏有46－40=6（人）； 
②加和：最多有11＋16＋8＋6=41（人），每人都有不爱好的活动。 
③作差：四项活动都爱好的至少有46－41=5（人）。A。 
思路2：公式三秒杀☆: 35+30+38+40-46×3-5 (尾数秒杀) 
总结公式：Y=A+B-I。Y=A+B+C-2I。Y=A+B+C+D-3I
</BlurredAnswer>